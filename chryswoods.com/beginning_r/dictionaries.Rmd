---
title: "Beginning R - Dictionaries"
output: html_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

If you used other programming languages before you may be familiar with the concept
of a "dictionary", "associative array" or "hash table" which allows the storage of 
arbitrary values accessed by a "key". R has provided this functionality via the
`hashtab()` function since R version 4.2.0. Make a new file named `dict.R` and put this in
it:

```R
sounds <- hashtab()
sounds[["cat"]] <- "meow"
sounds[["dog"]] <- "woof"
sounds[["horse"]] <- "neigh"

cat_sound <- sounds[["cat"]]

print(cat_sound)
```

Running that script, you should see 

```   
[1] "meow" 
```

printed to the screen.

What we did here was create a dictionary with the `hashtab()` function and then
assigned items associated with keys. The three items in the dictionary are `meow`, 
`woof` and `neigh`. We have linked these to the associated names with the 
double-square bracket syntax so `meow` is associated with `cat`, `woof` with 
`dog` and `neigh` with `horse`.

The value is the real data that we want to keep hold of and the key is how we can
get at the data we want.

On the next line we access the data in the dictionary sounds. Here we use the
square brackets to ask questions of our data. In  this case we're asking the 
dictionary to give us the value associated with the key `cat` and so it will
return to us `meow`.


> EXERCISE
>
> Edit `dict.R` to ask for the sound for the dog and the horse.
> 
> What happens if you ask for an animal that isn't in the dictionary?
>
> [Answer](dictionaries_answer01.html)

## Adding new data into dictionaries

We can easily add new entries to the dictionary at any point using the same
syntax as when it was originally created. Let's say  that we want to add in a new
sound for a cow into our sounds dictionary. The name that the data will have will be
"cow" and the value will be "moo". To do so we put `sounds[["cow"]]` on the
left-hand side of a object assignment expression, as if we're making a new object.
On the right goes the data that we want to put into the dictionary.

```R
sounds <- hashtab()
sounds[["cat"]] <- "meow"
sounds[["dog"]] <- "woof"
sounds[["horse"]] <- "neigh"

sounds[["cow"]] <- "moo"
```

This is saying that we want to add a new entry for the value `moo` into `sounds`, 
and to then associate it with the name (key) `cow`. If we want to check the contents
of the dictionary we can use the `maphash()` function, which applies a function to each
entry of the dictionary:

```R
maphash(sounds, function(key, value) {
    print(paste(key, "-", value))
})
```

This should print;

```
[1] "cat - meow"
[1] "cow - moo"
[1] "horse - neigh"
[1] "dog - woof"
```

> EXERCISE
>
> Edit `dict.R` so that the dictionary is initially defined with only the 
> cat and dog entries. Add the entry for the horse and then the cow dynamically
>
> [Answer](dictionaries_answer02.html)


## Removing data from dictionaries
If you want to remove an entry from a dictionary R provides the `remhash()` function.
To remove the entry with the key "dog" you could do the following:

```R
remhash(sounds, "dog")
```

## Looping over dictionaries

When using the `maphash()` function the second argument of the function contains the
current dictionary value:

```R
sounds <- hashtab()
sounds[["cat"]] <- "meow"
sounds[["dog"]] <- "woof"
sounds[["horse"]] <- "neigh"
maphash(sounds, function(thing, sound) {
    print(sound)
})
```

If you put this code into a file called `dict_loop.R` and run it you should see:

```
[1] "meow"
[1] "woof"
[1] "neigh"
```

Hopefully, you recognise those as the values from the dictionary. 

What if, for example, you wanted to loop over the keys instead? 
This is the first arguments of the function.

```R
sounds <- hashtab()
sounds[["cat"]] <- "meow"
sounds[["dog"]] <- "woof"
sounds[["horse"]] <- "neigh"
maphash(sounds, function(thing, sound) {
    print(thing)
})
```

will print:

```
[1] "cat"
[1] "dog"
[1] "horse"
```

You can use these two elements together to do something with both values:


```R
sounds <- hashtab()
sounds[["cat"]] <- "meow"
sounds[["dog"]] <- "woof"
sounds[["horse"]] <- "neigh"
maphash(sounds, function(thing, sound) {
    print(paste(thing, "goes", sound))
})
```

> EXERCISE
>
> Make a dictionary with the keys being the name of countries and the 
> value being the country's capital city. Loop over the dictionary and 
> print something like `The capital of France is Paris` for each item.
> 
> [Answer](dictionaries_answer03.html)

## [Previous](conditionals.html) | [Next](files.html)
